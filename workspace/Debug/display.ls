   1                     ; C Compiler for STM8 (COSMIC Software)
   2                     ; Generator V4.2.8 - 03 Dec 2008
   4                     .const:	section	.text
   5  0000               _LCD_NUM_BIT:
   6  0000 0e            	dc.b	14
   7  0001 2a            	dc.b	42
   8  0002 46            	dc.b	70
   9  0003 62            	dc.b	98
  10  0004 45            	dc.b	69
  11  0005 0d            	dc.b	13
  12  0006 29            	dc.b	41
  13  0007 00            	ds.b	1
  14  0008 10            	dc.b	16
  15  0009 2c            	dc.b	44
  16  000a 48            	dc.b	72
  17  000b 64            	dc.b	100
  18  000c 47            	dc.b	71
  19  000d 0f            	dc.b	15
  20  000e 2b            	dc.b	43
  21  000f 00            	ds.b	1
  22  0010 14            	dc.b	20
  23  0011 30            	dc.b	48
  24  0012 4c            	dc.b	76
  25  0013 68            	dc.b	104
  26  0014 4b            	dc.b	75
  27  0015 13            	dc.b	19
  28  0016 2f            	dc.b	47
  29  0017 00            	dc.b	0
  30  0018 75            	dc.b	117
  31  0019 85            	dc.b	133
  32  001a 95            	dc.b	149
  33  001b a5            	dc.b	165
  34  001c 94            	dc.b	148
  35  001d 74            	dc.b	116
  36  001e 84            	dc.b	132
  37  001f 00            	ds.b	1
  38  0020 77            	dc.b	119
  39  0021 87            	dc.b	135
  40  0022 97            	dc.b	151
  41  0023 a7            	dc.b	167
  42  0024 96            	dc.b	150
  43  0025 76            	dc.b	118
  44  0026 86            	dc.b	134
  45  0027 00            	ds.b	1
  46  0028 18            	dc.b	24
  47  0029 34            	dc.b	52
  48  002a 50            	dc.b	80
  49  002b 6c            	dc.b	108
  50  002c 4f            	dc.b	79
  51  002d 17            	dc.b	23
  52  002e 33            	dc.b	51
  53  002f 00            	ds.b	1
  54  0030 5f            	dc.b	95
  55  0031 43            	dc.b	67
  56  0032 27            	dc.b	39
  57  0033 0c            	dc.b	12
  58  0034 28            	dc.b	40
  59  0035 60            	dc.b	96
  60  0036 44            	dc.b	68
  61  0037 00            	ds.b	1
  62  0038 5b            	dc.b	91
  63  0039 3f            	dc.b	63
  64  003a 23            	dc.b	35
  65  003b 0a            	dc.b	10
  66  003c 26            	dc.b	38
  67  003d 5e            	dc.b	94
  68  003e 42            	dc.b	66
  69  003f 00            	ds.b	1
  70  0040 59            	dc.b	89
  71  0041 3d            	dc.b	61
  72  0042 21            	dc.b	33
  73  0043 06            	dc.b	6
  74  0044 22            	dc.b	34
  75  0045 5a            	dc.b	90
  76  0046 3e            	dc.b	62
  77  0047 00            	ds.b	1
  78  0048 1b            	dc.b	27
  79  0049 67            	dc.b	103
  80  004a 01            	dc.b	1
  81  004b 00            	dc.b	0
  82  004c 15            	dc.b	21
  83  004d 00            	dc.b	0
  84  004e 00            	dc.b	0
  85  004f 00            	ds.b	1
  86  0050 55            	dc.b	85
  87  0051 39            	dc.b	57
  88  0052 1d            	dc.b	29
  89  0053 73            	dc.b	115
  90  0054 83            	dc.b	131
  91  0055 a3            	dc.b	163
  92  0056 93            	dc.b	147
  93  0057 00            	ds.b	1
  94  0058 57            	dc.b	87
  95  0059 3b            	dc.b	59
  96  005a 1f            	dc.b	31
  97  005b 02            	dc.b	2
  98  005c 1e            	dc.b	30
  99  005d 56            	dc.b	86
 100  005e 3a            	dc.b	58
 101  005f 00            	ds.b	1
 102  0060               _LCD_CHAR_BIT:
 103  0060 63            	dc.b	99
 104  0061 a6            	dc.b	166
 105  0062 69            	dc.b	105
 106  0063 31            	dc.b	49
 107  0064 4d            	dc.b	77
 108  0065 6b            	dc.b	107
 109  0066 0b            	dc.b	11
 110  0067 07            	dc.b	7
 111  0068 61            	dc.b	97
 112  0069 a4            	dc.b	164
 113  006a 05            	dc.b	5
 114  006b 04            	dc.b	4
 115  006c 58            	dc.b	88
 116  006d 3c            	dc.b	60
 117  006e 20            	dc.b	32
 118  006f 03            	dc.b	3
 119  0070               _SEG8:
 120  0070 fc            	dc.b	252
 121  0071 60            	dc.b	96
 122  0072 da            	dc.b	218
 123  0073 f2            	dc.b	242
 124  0074 66            	dc.b	102
 125  0075 b6            	dc.b	182
 126  0076 be            	dc.b	190
 127  0077 e0            	dc.b	224
 128  0078 fe            	dc.b	254
 129  0079 f6            	dc.b	246
 130  007a ee            	dc.b	238
 131  007b 3e            	dc.b	62
 132  007c 9c            	dc.b	156
 133  007d 7a            	dc.b	122
 134  007e 9e            	dc.b	158
 135  007f 8e            	dc.b	142
 136  0080 00            	dc.b	0
 223                     ; 67 static void display_num(uint8_t pos, uint8_t val)
 223                     ; 68 {
 225                     	switch	.text
 226  0000               L3_display_num:
 228  0000 89            	pushw	x
 229  0001 5204          	subw	sp,#4
 230       00000004      OFST:	set	4
 233                     ; 71     i = SEG8[val];
 235  0003 9f            	ld	a,xl
 236  0004 5f            	clrw	x
 237  0005 97            	ld	xl,a
 238  0006 d60070        	ld	a,(_SEG8,x)
 239  0009 6b01          	ld	(OFST-3,sp),a
 240                     ; 72     for (j=0; j<8; j++)
 242  000b 0f02          	clr	(OFST-2,sp)
 243  000d               L55:
 244                     ; 74         k = LCD_NUM_BIT[pos][j];
 246  000d 7b05          	ld	a,(OFST+1,sp)
 247  000f 97            	ld	xl,a
 248  0010 a608          	ld	a,#8
 249  0012 42            	mul	x,a
 250  0013 01            	rrwa	x,a
 251  0014 1b02          	add	a,(OFST-2,sp)
 252  0016 2401          	jrnc	L6
 253  0018 5c            	incw	x
 254  0019               L6:
 255  0019 02            	rlwa	x,a
 256  001a d60000        	ld	a,(_LCD_NUM_BIT,x)
 257  001d 6b04          	ld	(OFST+0,sp),a
 258                     ; 75         L = k & 0x07;
 260  001f 7b04          	ld	a,(OFST+0,sp)
 261  0021 a407          	and	a,#7
 262  0023 6b03          	ld	(OFST-1,sp),a
 263                     ; 76         L = 1 << L;
 265  0025 7b03          	ld	a,(OFST-1,sp)
 266  0027 5f            	clrw	x
 267  0028 97            	ld	xl,a
 268  0029 a601          	ld	a,#1
 269  002b 5d            	tnzw	x
 270  002c 2704          	jreq	L01
 271  002e               L21:
 272  002e 48            	sll	a
 273  002f 5a            	decw	x
 274  0030 26fc          	jrne	L21
 275  0032               L01:
 276  0032 6b03          	ld	(OFST-1,sp),a
 277                     ; 77         k = k >> 3;
 279  0034 0404          	srl	(OFST+0,sp)
 280  0036 0404          	srl	(OFST+0,sp)
 281  0038 0404          	srl	(OFST+0,sp)
 282                     ; 78         if (i & 0x80)
 284  003a 7b01          	ld	a,(OFST-3,sp)
 285  003c a580          	bcp	a,#128
 286  003e 270e          	jreq	L36
 287                     ; 79             LCD->RAM[k] |= L;
 289  0040 7b04          	ld	a,(OFST+0,sp)
 290  0042 5f            	clrw	x
 291  0043 97            	ld	xl,a
 292  0044 d6540c        	ld	a,(21516,x)
 293  0047 1a03          	or	a,(OFST-1,sp)
 294  0049 d7540c        	ld	(21516,x),a
 296  004c 200d          	jra	L56
 297  004e               L36:
 298                     ; 81             LCD->RAM[k] &= ~L;
 300  004e 7b04          	ld	a,(OFST+0,sp)
 301  0050 5f            	clrw	x
 302  0051 97            	ld	xl,a
 303  0052 7b03          	ld	a,(OFST-1,sp)
 304  0054 43            	cpl	a
 305  0055 d4540c        	and	a,(21516,x)
 306  0058 d7540c        	ld	(21516,x),a
 307  005b               L56:
 308                     ; 82         i = i << 1;
 310  005b 0801          	sll	(OFST-3,sp)
 311                     ; 72     for (j=0; j<8; j++)
 313  005d 0c02          	inc	(OFST-2,sp)
 316  005f 7b02          	ld	a,(OFST-2,sp)
 317  0061 a108          	cp	a,#8
 318  0063 25a8          	jrult	L55
 319                     ; 84 }
 322  0065 5b06          	addw	sp,#6
 323  0067 81            	ret
 532                     ; 86 static void display_char(enum display_type type, bool on)
 532                     ; 87 {
 533                     	switch	.text
 534  0068               L76_display_char:
 536  0068 89            	pushw	x
 537  0069 89            	pushw	x
 538       00000002      OFST:	set	2
 541                     ; 90     k = LCD_CHAR_BIT[type];
 543  006a 9e            	ld	a,xh
 544  006b 5f            	clrw	x
 545  006c 97            	ld	xl,a
 546  006d d60060        	ld	a,(_LCD_CHAR_BIT,x)
 547  0070 6b02          	ld	(OFST+0,sp),a
 548                     ; 91     L = k & 0x7;
 550  0072 7b02          	ld	a,(OFST+0,sp)
 551  0074 a407          	and	a,#7
 552  0076 6b01          	ld	(OFST-1,sp),a
 553                     ; 92     L = 1 << L;
 555  0078 7b01          	ld	a,(OFST-1,sp)
 556  007a 5f            	clrw	x
 557  007b 97            	ld	xl,a
 558  007c a601          	ld	a,#1
 559  007e 5d            	tnzw	x
 560  007f 2704          	jreq	L61
 561  0081               L02:
 562  0081 48            	sll	a
 563  0082 5a            	decw	x
 564  0083 26fc          	jrne	L02
 565  0085               L61:
 566  0085 6b01          	ld	(OFST-1,sp),a
 567                     ; 93     k = k >> 3;
 569  0087 0402          	srl	(OFST+0,sp)
 570  0089 0402          	srl	(OFST+0,sp)
 571  008b 0402          	srl	(OFST+0,sp)
 572                     ; 95     if (on)
 574  008d 0d04          	tnz	(OFST+2,sp)
 575  008f 270e          	jreq	L102
 576                     ; 96         LCD->RAM[k] |= L;
 578  0091 7b02          	ld	a,(OFST+0,sp)
 579  0093 5f            	clrw	x
 580  0094 97            	ld	xl,a
 581  0095 d6540c        	ld	a,(21516,x)
 582  0098 1a01          	or	a,(OFST-1,sp)
 583  009a d7540c        	ld	(21516,x),a
 585  009d 200d          	jra	L302
 586  009f               L102:
 587                     ; 98         LCD->RAM[k] &= ~L;
 589  009f 7b02          	ld	a,(OFST+0,sp)
 590  00a1 5f            	clrw	x
 591  00a2 97            	ld	xl,a
 592  00a3 7b01          	ld	a,(OFST-1,sp)
 593  00a5 43            	cpl	a
 594  00a6 d4540c        	and	a,(21516,x)
 595  00a9 d7540c        	ld	(21516,x),a
 596  00ac               L302:
 597                     ; 99 }
 600  00ac 5b04          	addw	sp,#4
 601  00ae 81            	ret
 674                     ; 101 static void display_time(uint8_t type, uint8_t num1, uint8_t num2, bool on)
 674                     ; 102 {
 675                     	switch	.text
 676  00af               L502_display_time:
 678  00af 89            	pushw	x
 679  00b0 88            	push	a
 680       00000001      OFST:	set	1
 683                     ; 103     uint8_t base = (type == Date) ? 0 : 3;
 685  00b1 9e            	ld	a,xh
 686  00b2 4d            	tnz	a
 687  00b3 2603          	jrne	L42
 688  00b5 4f            	clr	a
 689  00b6 2002          	jra	L62
 690  00b8               L42:
 691  00b8 a603          	ld	a,#3
 692  00ba               L62:
 693  00ba 6b01          	ld	(OFST+0,sp),a
 694                     ; 105     if (!on)
 696  00bc 0d07          	tnz	(OFST+6,sp)
 697  00be 262e          	jrne	L542
 698                     ; 107         display_char((type == Date) ? Ten1 : Ten2, 0);
 700  00c0 9e            	ld	a,xh
 701  00c1 4d            	tnz	a
 702  00c2 2604          	jrne	L03
 703  00c4 a608          	ld	a,#8
 704  00c6 2002          	jra	L23
 705  00c8               L03:
 706  00c8 a609          	ld	a,#9
 707  00ca               L23:
 708  00ca 5f            	clrw	x
 709  00cb 95            	ld	xh,a
 710  00cc ad9a          	call	L76_display_char
 712                     ; 108         display_num(base, 16);
 714  00ce ae0010        	ldw	x,#16
 715  00d1 7b01          	ld	a,(OFST+0,sp)
 716  00d3 95            	ld	xh,a
 717  00d4 cd0000        	call	L3_display_num
 719                     ; 109         display_num(base + 1, 16);
 721  00d7 ae0010        	ldw	x,#16
 722  00da 7b01          	ld	a,(OFST+0,sp)
 723  00dc 4c            	inc	a
 724  00dd 95            	ld	xh,a
 725  00de cd0000        	call	L3_display_num
 727                     ; 110         display_num(base + 2, 16);
 729  00e1 ae0010        	ldw	x,#16
 730  00e4 7b01          	ld	a,(OFST+0,sp)
 731  00e6 ab02          	add	a,#2
 732  00e8 95            	ld	xh,a
 733  00e9 cd0000        	call	L3_display_num
 735                     ; 111         return;
 737  00ec 205c          	jra	L44
 738  00ee               L542:
 739                     ; 114     display_char((type == Date) ? Ten1 : Ten2, (_Bool)(num1 / 10));
 741  00ee 7b03          	ld	a,(OFST+2,sp)
 742  00f0 5f            	clrw	x
 743  00f1 97            	ld	xl,a
 744  00f2 a60a          	ld	a,#10
 745  00f4 cd0000        	call	c_sdivx
 747  00f7 a30000        	cpw	x,#0
 748  00fa 2704          	jreq	L43
 749  00fc a601          	ld	a,#1
 750  00fe 2001          	jra	L63
 751  0100               L43:
 752  0100 4f            	clr	a
 753  0101               L63:
 754  0101 97            	ld	xl,a
 755  0102 89            	pushw	x
 756  0103 0d04          	tnz	(OFST+3,sp)
 757  0105 2604          	jrne	L04
 758  0107 a608          	ld	a,#8
 759  0109 2002          	jra	L24
 760  010b               L04:
 761  010b a609          	ld	a,#9
 762  010d               L24:
 763  010d 85            	popw	x
 764  010e 95            	ld	xh,a
 765  010f cd0068        	call	L76_display_char
 767                     ; 115     display_num(base, num1 % 10);
 769  0112 7b03          	ld	a,(OFST+2,sp)
 770  0114 ae000a        	ldw	x,#10
 771  0117 51            	exgw	x,y
 772  0118 5f            	clrw	x
 773  0119 97            	ld	xl,a
 774  011a 65            	divw	x,y
 775  011b 909f          	ld	a,yl
 776  011d 97            	ld	xl,a
 777  011e 7b01          	ld	a,(OFST+0,sp)
 778  0120 95            	ld	xh,a
 779  0121 cd0000        	call	L3_display_num
 781                     ; 116     display_num(base + 1, num2 / 10);
 783  0124 7b06          	ld	a,(OFST+5,sp)
 784  0126 ae000a        	ldw	x,#10
 785  0129 51            	exgw	x,y
 786  012a 5f            	clrw	x
 787  012b 97            	ld	xl,a
 788  012c 65            	divw	x,y
 789  012d 9f            	ld	a,xl
 790  012e 97            	ld	xl,a
 791  012f 7b01          	ld	a,(OFST+0,sp)
 792  0131 4c            	inc	a
 793  0132 95            	ld	xh,a
 794  0133 cd0000        	call	L3_display_num
 796                     ; 117     display_num(base + 2, num2 % 10);
 798  0136 7b06          	ld	a,(OFST+5,sp)
 799  0138 ae000a        	ldw	x,#10
 800  013b 51            	exgw	x,y
 801  013c 5f            	clrw	x
 802  013d 97            	ld	xl,a
 803  013e 65            	divw	x,y
 804  013f 909f          	ld	a,yl
 805  0141 97            	ld	xl,a
 806  0142 7b01          	ld	a,(OFST+0,sp)
 807  0144 ab02          	add	a,#2
 808  0146 95            	ld	xh,a
 809  0147 cd0000        	call	L3_display_num
 811                     ; 118 }
 812  014a               L44:
 815  014a 5b03          	addw	sp,#3
 816  014c 81            	ret
 871                     ; 120 static void display_date(uint8_t month, uint8_t day, bool on)
 871                     ; 121 {
 872                     	switch	.text
 873  014d               L742_display_date:
 875  014d 89            	pushw	x
 876       00000000      OFST:	set	0
 879                     ; 122     display_char(MonthDate, on);
 881  014e 7b05          	ld	a,(OFST+5,sp)
 882  0150 97            	ld	xl,a
 883  0151 4f            	clr	a
 884  0152 95            	ld	xh,a
 885  0153 cd0068        	call	L76_display_char
 887                     ; 123     display_time(Date, month, day, on);
 889  0156 7b05          	ld	a,(OFST+5,sp)
 890  0158 88            	push	a
 891  0159 7b03          	ld	a,(OFST+3,sp)
 892  015b 88            	push	a
 893  015c 7b03          	ld	a,(OFST+3,sp)
 894  015e 97            	ld	xl,a
 895  015f 4f            	clr	a
 896  0160 95            	ld	xh,a
 897  0161 cd00af        	call	L502_display_time
 899  0164 85            	popw	x
 900                     ; 124 }
 903  0165 85            	popw	x
 904  0166 81            	ret
 959                     ; 126 static void display_clock(uint8_t hour, uint8_t minute, bool on)
 959                     ; 127 {
 960                     	switch	.text
 961  0167               L772_display_clock:
 963  0167 89            	pushw	x
 964       00000000      OFST:	set	0
 967                     ; 128     display_char(Colon, on);
 969  0168 7b05          	ld	a,(OFST+5,sp)
 970  016a 97            	ld	xl,a
 971  016b a601          	ld	a,#1
 972  016d 95            	ld	xh,a
 973  016e cd0068        	call	L76_display_char
 975                     ; 129     display_time(Clock, hour, minute, on);
 977  0171 7b05          	ld	a,(OFST+5,sp)
 978  0173 88            	push	a
 979  0174 7b03          	ld	a,(OFST+3,sp)
 980  0176 88            	push	a
 981  0177 7b03          	ld	a,(OFST+3,sp)
 982  0179 97            	ld	xl,a
 983  017a a601          	ld	a,#1
 984  017c 95            	ld	xh,a
 985  017d cd00af        	call	L502_display_time
 987  0180 85            	popw	x
 988                     ; 130 }
 991  0181 85            	popw	x
 992  0182 81            	ret
1038                     ; 132 static void display_am_pm(bool pm, bool on)
1038                     ; 133 {
1039                     	switch	.text
1040  0183               L723_display_am_pm:
1042  0183 89            	pushw	x
1043       00000000      OFST:	set	0
1046                     ; 134     display_char(AM, on && !pm);
1048  0184 9f            	ld	a,xl
1049  0185 4d            	tnz	a
1050  0186 2708          	jreq	L45
1051  0188 9e            	ld	a,xh
1052  0189 4d            	tnz	a
1053  018a 2604          	jrne	L45
1054  018c a601          	ld	a,#1
1055  018e 2001          	jra	L65
1056  0190               L45:
1057  0190 4f            	clr	a
1058  0191               L65:
1059  0191 97            	ld	xl,a
1060  0192 a603          	ld	a,#3
1061  0194 95            	ld	xh,a
1062  0195 cd0068        	call	L76_display_char
1064                     ; 135     display_char(PM, on && pm);
1066  0198 0d02          	tnz	(OFST+2,sp)
1067  019a 2708          	jreq	L06
1068  019c 0d01          	tnz	(OFST+1,sp)
1069  019e 2704          	jreq	L06
1070  01a0 a601          	ld	a,#1
1071  01a2 2001          	jra	L26
1072  01a4               L06:
1073  01a4 4f            	clr	a
1074  01a5               L26:
1075  01a5 97            	ld	xl,a
1076  01a6 a604          	ld	a,#4
1077  01a8 95            	ld	xh,a
1078  01a9 cd0068        	call	L76_display_char
1080                     ; 136 }
1083  01ac 85            	popw	x
1084  01ad 81            	ret
1384                     ; 138 static void display_update_time(void)
1384                     ; 139 {
1385                     	switch	.text
1386  01ae               L353_display_update_time:
1388  01ae 5208          	subw	sp,#8
1389       00000008      OFST:	set	8
1392                     ; 143     RTC_GetDate(RTC_Format_BIN, &date);
1394  01b0 96            	ldw	x,sp
1395  01b1 1c0001        	addw	x,#OFST-7
1396  01b4 89            	pushw	x
1397  01b5 4f            	clr	a
1398  01b6 cd0000        	call	_RTC_GetDate
1400  01b9 85            	popw	x
1401                     ; 144     display_date((uint8_t)date.RTC_Month, date.RTC_Date, TRUE);
1403  01ba 4b01          	push	#1
1404  01bc 7b04          	ld	a,(OFST-4,sp)
1405  01be 97            	ld	xl,a
1406  01bf 7b03          	ld	a,(OFST-5,sp)
1407  01c1 95            	ld	xh,a
1408  01c2 ad89          	call	L742_display_date
1410  01c4 84            	pop	a
1411                     ; 146     RTC_GetTime(RTC_Format_BIN, &time);
1413  01c5 96            	ldw	x,sp
1414  01c6 1c0005        	addw	x,#OFST-3
1415  01c9 89            	pushw	x
1416  01ca 4f            	clr	a
1417  01cb cd0000        	call	_RTC_GetTime
1419  01ce 85            	popw	x
1420                     ; 147     display_clock(time.RTC_Hours, time.RTC_Minutes, TRUE);
1422  01cf 4b01          	push	#1
1423  01d1 7b07          	ld	a,(OFST-1,sp)
1424  01d3 97            	ld	xl,a
1425  01d4 7b06          	ld	a,(OFST-2,sp)
1426  01d6 95            	ld	xh,a
1427  01d7 ad8e          	call	L772_display_clock
1429  01d9 84            	pop	a
1430                     ; 148     display_am_pm(time.RTC_H12, TRUE);
1432  01da ae0001        	ldw	x,#1
1433  01dd 7b08          	ld	a,(OFST+0,sp)
1434  01df 95            	ld	xh,a
1435  01e0 ada1          	call	L723_display_am_pm
1437                     ; 149 }
1440  01e2 5b08          	addw	sp,#8
1441  01e4 81            	ret
1471                     ; 151 static void lcd_glass_init(void)
1471                     ; 152 {
1472                     	switch	.text
1473  01e5               L325_lcd_glass_init:
1477                     ; 154     CLK_PeripheralClockConfig(CLK_Peripheral_LCD, ENABLE);
1479  01e5 ae0001        	ldw	x,#1
1480  01e8 a613          	ld	a,#19
1481  01ea 95            	ld	xh,a
1482  01eb cd0000        	call	_CLK_PeripheralClockConfig
1484                     ; 157     LCD_Init(LCD_Prescaler_4, LCD_Divider_18, LCD_Duty_1_4,
1484                     ; 158            LCD_Bias_1_3, LCD_VoltageSource_External);
1486  01ee 4b01          	push	#1
1487  01f0 4b00          	push	#0
1488  01f2 4b06          	push	#6
1489  01f4 ae0002        	ldw	x,#2
1490  01f7 a620          	ld	a,#32
1491  01f9 95            	ld	xh,a
1492  01fa cd0000        	call	_LCD_Init
1494  01fd 5b03          	addw	sp,#3
1495                     ; 161     LCD_PortMaskConfig(LCD_PortMaskRegister_0, 0xFE); // 1~7
1497  01ff ae00fe        	ldw	x,#254
1498  0202 4f            	clr	a
1499  0203 95            	ld	xh,a
1500  0204 cd0000        	call	_LCD_PortMaskConfig
1502                     ; 162     LCD_PortMaskConfig(LCD_PortMaskRegister_1, 0xFC); // 10~15
1504  0207 ae00fc        	ldw	x,#252
1505  020a a601          	ld	a,#1
1506  020c 95            	ld	xh,a
1507  020d cd0000        	call	_LCD_PortMaskConfig
1509                     ; 163     LCD_PortMaskConfig(LCD_PortMaskRegister_2, 0xB9); // 16 19~21 23
1511  0210 ae00b9        	ldw	x,#185
1512  0213 a602          	ld	a,#2
1513  0215 95            	ld	xh,a
1514  0216 cd0000        	call	_LCD_PortMaskConfig
1516                     ; 164     LCD_PortMaskConfig(LCD_PortMaskRegister_3, 0x89); // 24 27 31
1518  0219 ae0089        	ldw	x,#137
1519  021c a603          	ld	a,#3
1520  021e 95            	ld	xh,a
1521  021f cd0000        	call	_LCD_PortMaskConfig
1523                     ; 165     LCD_PortMaskConfig(LCD_PortMaskRegister_4, 0x0F); // 32~35
1525  0222 ae000f        	ldw	x,#15
1526  0225 a604          	ld	a,#4
1527  0227 95            	ld	xh,a
1528  0228 cd0000        	call	_LCD_PortMaskConfig
1530                     ; 166     LCD_PortMaskConfig(LCD_PortMaskRegister_5, 0x00);
1532  022b 5f            	clrw	x
1533  022c a605          	ld	a,#5
1534  022e 95            	ld	xh,a
1535  022f cd0000        	call	_LCD_PortMaskConfig
1537                     ; 168     LCD_ContrastConfig(LCD_Contrast_Level_7);
1539  0232 a60e          	ld	a,#14
1540  0234 cd0000        	call	_LCD_ContrastConfig
1542                     ; 169     LCD_DeadTimeConfig(LCD_DeadTime_0);
1544  0237 4f            	clr	a
1545  0238 cd0000        	call	_LCD_DeadTimeConfig
1547                     ; 170     LCD_PulseOnDurationConfig(LCD_PulseOnDuration_7);
1549  023b a6e0          	ld	a,#224
1550  023d cd0000        	call	_LCD_PulseOnDurationConfig
1552                     ; 172     LCD_Cmd(ENABLE); /*!< Enable LCD peripheral */
1554  0240 a601          	ld	a,#1
1555  0242 cd0000        	call	_LCD_Cmd
1557                     ; 173 }
1560  0245 81            	ret
1588                     ; 175 static void rtc_alarm_init(void)
1588                     ; 176 {
1589                     	switch	.text
1590  0246               L535_rtc_alarm_init:
1594                     ; 177     CLK_RTCClockConfig(CLK_RTCCLKSource_LSE, CLK_RTCCLKDiv_1);
1596  0246 5f            	clrw	x
1597  0247 a610          	ld	a,#16
1598  0249 95            	ld	xh,a
1599  024a cd0000        	call	_CLK_RTCClockConfig
1601                     ; 180     CLK_PeripheralClockConfig(CLK_Peripheral_RTC, ENABLE);
1603  024d ae0001        	ldw	x,#1
1604  0250 a612          	ld	a,#18
1605  0252 95            	ld	xh,a
1606  0253 cd0000        	call	_CLK_PeripheralClockConfig
1608                     ; 183     RTC_WakeUpClockConfig(RTC_WakeUpClock_CK_SPRE_16bits);
1610  0256 a604          	ld	a,#4
1611  0258 cd0000        	call	_RTC_WakeUpClockConfig
1613                     ; 185     RTC_ITConfig(RTC_IT_WUT, ENABLE);
1615  025b 4b01          	push	#1
1616  025d ae0040        	ldw	x,#64
1617  0260 cd0000        	call	_RTC_ITConfig
1619  0263 84            	pop	a
1621  0264               L155:
1622                     ; 187     while (RTC_WaitForSynchro() != SUCCESS);
1624  0264 cd0000        	call	_RTC_WaitForSynchro
1626  0267 a101          	cp	a,#1
1627  0269 26f9          	jrne	L155
1628                     ; 188 }
1631  026b 81            	ret
1678                     ; 191 void display_thread(uint32_t param)
1678                     ; 192 {
1679                     	switch	.text
1680  026c               _display_thread:
1682  026c 5204          	subw	sp,#4
1683       00000004      OFST:	set	4
1686                     ; 193     int32_t cnt = 0;
1688  026e ae0000        	ldw	x,#0
1689  0271 1f03          	ldw	(OFST-1,sp),x
1690  0273 ae0000        	ldw	x,#0
1691  0276 1f01          	ldw	(OFST-3,sp),x
1692                     ; 195     lcd_glass_init();
1694  0278 cd01e5        	call	L325_lcd_glass_init
1696                     ; 196     rtc_alarm_init();
1698  027b adc9          	call	L535_rtc_alarm_init
1700  027d               L775:
1701                     ; 199         display_update_time();
1703  027d cd01ae        	call	L353_display_update_time
1705                     ; 200         atomTimerDelay(10 * SYSTEM_TICKS_PER_SEC);
1707  0280 ae04e2        	ldw	x,#1250
1708  0283 89            	pushw	x
1709  0284 ae0000        	ldw	x,#0
1710  0287 89            	pushw	x
1711  0288 cd0000        	call	_atomTimerDelay
1713  028b 5b04          	addw	sp,#4
1715  028d 20ee          	jra	L775
1761                     	xdef	_SEG8
1762                     	xdef	_LCD_CHAR_BIT
1763                     	xdef	_LCD_NUM_BIT
1764                     	xdef	_display_thread
1765                     	xref	_atomTimerDelay
1766                     	xref	_RTC_ITConfig
1767                     	xref	_RTC_WakeUpClockConfig
1768                     	xref	_RTC_GetDate
1769                     	xref	_RTC_GetTime
1770                     	xref	_RTC_WaitForSynchro
1771                     	xref	_LCD_ContrastConfig
1772                     	xref	_LCD_DeadTimeConfig
1773                     	xref	_LCD_PulseOnDurationConfig
1774                     	xref	_LCD_Cmd
1775                     	xref	_LCD_PortMaskConfig
1776                     	xref	_LCD_Init
1777                     	xref	_CLK_PeripheralClockConfig
1778                     	xref	_CLK_RTCClockConfig
1779                     	xref.b	c_x
1798                     	xref	c_sdivx
1799                     	end
